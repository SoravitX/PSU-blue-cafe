-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Server version:               10.4.32-MariaDB - mariadb.org binary distribution
-- Server OS:                    Win64
-- HeidiSQL Version:             12.8.0.6908
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


-- Dumping database structure for psu_blue_cafe
CREATE DATABASE IF NOT EXISTS `psu_blue_cafe` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */;
USE `psu_blue_cafe`;

-- Dumping structure for table psu_blue_cafe.attendance
CREATE TABLE IF NOT EXISTS `attendance` (
  `attendance_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `date_in` date NOT NULL,
  `time_in` time NOT NULL,
  `date_out` date NOT NULL,
  `time_out` time NOT NULL,
  `hour_type` enum('normal','fund') NOT NULL DEFAULT 'normal',
  PRIMARY KEY (`attendance_id`),
  KEY `fk_attendance_user` (`user_id`),
  CONSTRAINT `fk_attendance_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Dumping data for table psu_blue_cafe.attendance: ~14 rows (approximately)
INSERT INTO `attendance` (`attendance_id`, `user_id`, `date_in`, `time_in`, `date_out`, `time_out`, `hour_type`) VALUES
	(1, 3, '2025-08-27', '21:23:37', '2025-08-27', '21:23:48', 'normal'),
	(2, 3, '2025-08-27', '21:24:42', '2025-08-27', '21:24:45', 'normal'),
	(3, 3, '2025-08-27', '23:11:49', '2025-08-28', '12:10:26', 'normal'),
	(4, 3, '2025-09-01', '16:55:44', '2025-09-01', '16:55:45', 'normal'),
	(10, 3, '2025-09-09', '13:37:59', '2025-09-09', '13:38:02', 'normal'),
	(11, 3, '2025-09-09', '13:38:04', '2025-09-09', '13:47:35', 'normal'),
	(12, 3, '2025-09-09', '13:47:37', '2025-09-09', '13:47:38', 'fund'),
	(13, 1, '2025-09-09', '13:49:04', '2025-09-09', '13:49:05', 'normal'),
	(14, 1, '2025-09-09', '13:49:06', '2025-09-09', '13:49:07', 'normal'),
	(15, 1, '2025-09-09', '13:58:33', '2025-09-09', '14:18:04', 'normal'),
	(16, 1, '2025-09-09', '14:18:07', '2025-09-09', '23:59:00', 'normal'),
	(17, 3, '2025-09-13', '13:11:27', '2025-09-13', '17:00:00', 'normal'),
	(18, 3, '2025-09-17', '13:25:51', '2025-09-17', '13:25:53', 'fund'),
	(19, 3, '2025-09-17', '13:25:54', '2025-09-17', '13:25:55', 'fund');

-- Dumping structure for table psu_blue_cafe.categories
CREATE TABLE IF NOT EXISTS `categories` (
  `category_id` int(11) NOT NULL AUTO_INCREMENT,
  `category_name` varchar(100) NOT NULL,
  `position` int(11) NOT NULL DEFAULT 0,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`category_id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Dumping data for table psu_blue_cafe.categories: ~6 rows (approximately)
INSERT INTO `categories` (`category_id`, `category_name`, `position`, `is_active`) VALUES
	(1, 'MATCHA', 4, 1),
	(2, 'TEA & COFFEE', 1, 1),
	(3, 'ITALIAN SODA', 6, 1),
	(4, 'NON COFFEE', 2, 1),
	(5, 'Other', 5, 1),
	(6, 'Beverage', 3, 1);

-- Dumping structure for table psu_blue_cafe.menu
CREATE TABLE IF NOT EXISTS `menu` (
  `menu_id` int(11) NOT NULL AUTO_INCREMENT,
  `category_id` int(11) NOT NULL,
  `name` varchar(100) NOT NULL,
  `price` decimal(10,2) NOT NULL,
  `description` varchar(255) DEFAULT NULL,
  `image` varchar(255) DEFAULT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `current_recipe_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`menu_id`),
  KEY `fk_menu_category` (`category_id`),
  KEY `fk_menu_current_recipe` (`current_recipe_id`),
  CONSTRAINT `fk_menu_category` FOREIGN KEY (`category_id`) REFERENCES `categories` (`category_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_menu_current_recipe` FOREIGN KEY (`current_recipe_id`) REFERENCES `recipe_headers` (`recipe_id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Dumping data for table psu_blue_cafe.menu: ~20 rows (approximately)
INSERT INTO `menu` (`menu_id`, `category_id`, `name`, `price`, `description`, `image`, `is_active`, `current_recipe_id`) VALUES
	(7, 1, 'ชาไทยๆ', 50.00, NULL, '1755537032_3d7ed429ef.jpg', 0, NULL),
	(8, 3, 'โซดาพาณิชย์', 400.00, NULL, '1759062053_3a547bed3b.png', 1, 26),
	(9, 1, 'มัทฉะลาเต้1', 40.00, NULL, '1756375083_7f688ce59c.jpg', 0, NULL),
	(10, 1, 'มัทฉะมะพร้าว', 40.00, NULL, '1756375212_b66ec3274f.webp', 0, NULL),
	(11, 2, 'ชาเขียวนม', 40.00, NULL, '1756375242_55470ce83d.webp', 1, NULL),
	(12, 2, 'ชาดำ', 40.00, NULL, '1756375310_d7f1afc2dd.jpg', 1, NULL),
	(13, 2, 'ชามะนาว', 40.00, NULL, '1756375400_68ae94caf9.jpg', 1, NULL),
	(14, 2, 'Blue Americano', 40.00, NULL, '1756375424_cea13ebdd0.jpg', 1, NULL),
	(15, 3, 'โซดาถาปัตย์', 40.00, NULL, '1756375482_bc30f29139.png', 1, NULL),
	(16, 3, 'บ๊วยโซดา', 40.00, NULL, '1756375550_2e6dff320e.jpeg', 1, NULL),
	(17, 4, 'โอวัลตินเย็น', 40.00, NULL, '1756375572_0be3f31ec9.jpg', 1, NULL),
	(18, 4, 'โกโก้เย็น', 40.00, NULL, '1756375625_841d0a2bb6.jpg', 1, NULL),
	(19, 4, 'นมชมพู', 40.00, NULL, '1756375656_0e4115762a.webp', 1, NULL),
	(20, 4, 'มะพร้าวโยเกิร์ต', 40.00, NULL, '1756375737_60eba06c92.jpg', 1, NULL),
	(21, 4, 'นมสตรอเบอร์รี่', 40.00, NULL, '1756375829_f25d6dd63e.png', 1, 22),
	(22, 5, 'เสาวรสโซดา', 40.00, NULL, '1756375860_d9521e3685.webp', 1, NULL),
	(23, 5, 'ชาเขียวลิ้นจี่', 40.00, NULL, '1756375918_63045893fa.png', 1, NULL),
	(24, 6, 'Matcha Coconut (มัทฉะมะพร้าว) (16 oz. Glass)', 40.00, NULL, NULL, 0, NULL),
	(25, 3, 'CM Soda', 25.00, NULL, NULL, 0, NULL),
	(26, 1, 'PUBG', 40.00, NULL, '1759154240_f0ad90657b.png', 1, NULL);

-- Dumping structure for table psu_blue_cafe.menu_toppings
CREATE TABLE IF NOT EXISTS `menu_toppings` (
  `menu_id` int(11) NOT NULL,
  `topping_id` int(11) NOT NULL,
  `extra_price` decimal(10,2) NOT NULL DEFAULT 0.00,
  PRIMARY KEY (`menu_id`,`topping_id`),
  KEY `topping_id` (`topping_id`),
  CONSTRAINT `menu_toppings_ibfk_1` FOREIGN KEY (`menu_id`) REFERENCES `menu` (`menu_id`),
  CONSTRAINT `menu_toppings_ibfk_2` FOREIGN KEY (`topping_id`) REFERENCES `toppings` (`topping_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.menu_toppings: ~0 rows (approximately)

-- Dumping structure for table psu_blue_cafe.orders
CREATE TABLE IF NOT EXISTS `orders` (
  `order_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `order_time` datetime NOT NULL DEFAULT current_timestamp(),
  `order_date` date NOT NULL,
  `order_seq` int(11) NOT NULL DEFAULT 0,
  `status` enum('awaiting_payment','pending','ready','canceled') NOT NULL DEFAULT 'awaiting_payment',
  `payment_method` enum('transfer','cash') NOT NULL DEFAULT 'transfer',
  `total_price` decimal(10,2) NOT NULL,
  `updated_at` datetime(6) NOT NULL,
  `promo_id` int(11) DEFAULT NULL,
  `discount_amount` decimal(10,2) NOT NULL DEFAULT 0.00,
  `final_total` decimal(10,2) NOT NULL DEFAULT 0.00,
  PRIMARY KEY (`order_id`),
  UNIQUE KEY `uk_orders_day_seq` (`order_date`,`order_seq`),
  KEY `fk_orders_user` (`user_id`),
  KEY `idx_orders_updated_at` (`updated_at`),
  KEY `idx_orders_user_updated` (`user_id`,`updated_at`,`status`),
  KEY `idx_orders_feed` (`user_id`,`updated_at`,`order_id`),
  KEY `fk_orders_promo` (`promo_id`),
  KEY `idx_orders_status_updated` (`status`,`updated_at`),
  KEY `idx_orders_user` (`user_id`),
  KEY `idx_orders_order` (`order_id`),
  KEY `idx_orders_updated` (`updated_at`),
  CONSTRAINT `fk_orders_promo` FOREIGN KEY (`promo_id`) REFERENCES `promotions` (`promo_id`),
  CONSTRAINT `fk_orders_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=135 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Dumping data for table psu_blue_cafe.orders: ~134 rows (approximately)
INSERT INTO `orders` (`order_id`, `user_id`, `order_time`, `order_date`, `order_seq`, `status`, `payment_method`, `total_price`, `updated_at`, `promo_id`, `discount_amount`, `final_total`) VALUES
	(1, 3, '2025-09-27 01:24:08', '2025-09-27', 1, 'ready', 'transfer', 40.00, '2025-09-27 01:24:24.000000', NULL, 0.00, 0.00),
	(2, 3, '2025-09-27 01:24:16', '2025-09-27', 2, 'ready', 'transfer', 40.00, '2025-09-27 01:24:21.000000', NULL, 0.00, 0.00),
	(3, 3, '2025-09-27 01:24:27', '2025-09-27', 3, 'ready', 'transfer', 40.00, '2025-09-27 01:24:49.117712', NULL, 0.00, 0.00),
	(4, 3, '2025-09-27 01:25:13', '2025-09-27', 4, 'ready', 'transfer', 40.00, '2025-09-27 01:26:09.000000', NULL, 0.00, 0.00),
	(5, 3, '2025-09-27 01:25:37', '2025-09-27', 5, 'ready', 'transfer', 40.00, '2025-09-27 11:55:25.000000', NULL, 0.00, 0.00),
	(6, 3, '2025-09-27 01:25:58', '2025-09-27', 6, 'ready', 'transfer', 40.00, '2025-09-27 01:26:18.000000', NULL, 0.00, 0.00),
	(7, 3, '2025-09-27 11:54:49', '2025-09-27', 7, 'ready', 'transfer', 40.00, '2025-09-27 11:55:24.000000', NULL, 0.00, 0.00),
	(8, 3, '2025-09-27 11:55:28', '2025-09-27', 8, 'ready', 'transfer', 40.00, '2025-09-27 11:55:49.000000', NULL, 0.00, 0.00),
	(9, 3, '2025-09-27 11:56:52', '2025-09-27', 9, 'ready', 'transfer', 40.00, '2025-09-27 11:57:08.000000', NULL, 0.00, 0.00),
	(10, 3, '2025-09-27 12:04:37', '2025-09-27', 10, 'ready', 'transfer', 40.00, '2025-09-27 12:05:26.000000', NULL, 0.00, 0.00),
	(11, 3, '2025-09-27 12:05:29', '2025-09-27', 11, 'ready', 'transfer', 80.00, '2025-09-27 12:14:03.000000', NULL, 0.00, 0.00),
	(12, 3, '2025-09-27 12:05:53', '2025-09-27', 12, 'ready', 'transfer', 80.00, '2025-09-27 12:14:02.000000', NULL, 0.00, 0.00),
	(13, 3, '2025-09-27 12:14:07', '2025-09-27', 13, 'ready', 'transfer', 40.00, '2025-09-27 12:14:37.000000', NULL, 0.00, 0.00),
	(14, 3, '2025-09-27 13:24:19', '2025-09-27', 14, 'ready', 'transfer', 40.00, '2025-09-27 13:24:32.000000', NULL, 0.00, 0.00),
	(15, 1, '2025-09-27 13:40:47', '2025-09-27', 15, 'ready', 'transfer', 40.00, '2025-09-27 13:41:49.000000', NULL, 0.00, 0.00),
	(16, 3, '2025-09-27 13:41:54', '2025-09-27', 16, 'ready', 'transfer', 40.00, '2025-09-27 13:42:25.000000', NULL, 0.00, 0.00),
	(17, 3, '2025-09-27 13:44:00', '2025-09-27', 17, 'ready', 'transfer', 40.00, '2025-09-27 13:46:56.000000', NULL, 0.00, 0.00),
	(18, 3, '2025-09-27 13:44:32', '2025-09-27', 18, 'ready', 'transfer', 38.00, '2025-09-27 16:49:35.000000', NULL, 0.00, 0.00),
	(19, 3, '2025-09-27 13:56:03', '2025-09-27', 19, 'ready', 'transfer', 741.00, '2025-09-27 14:00:09.000000', NULL, 0.00, 0.00),
	(20, 1, '2025-09-27 14:07:21', '2025-09-27', 20, 'ready', 'transfer', 40.00, '2025-09-27 16:49:34.000000', NULL, 0.00, 0.00),
	(21, 3, '2025-09-27 16:48:51', '2025-09-27', 21, 'ready', 'transfer', 40.00, '2025-09-27 16:49:34.000000', NULL, 0.00, 0.00),
	(22, 3, '2025-09-27 17:25:05', '2025-09-27', 22, 'ready', 'transfer', 40.00, '2025-09-27 20:20:07.000000', NULL, 0.00, 0.00),
	(23, 3, '2025-09-27 17:25:17', '2025-09-27', 23, 'ready', 'transfer', 40.00, '2025-09-27 20:20:07.000000', NULL, 0.00, 0.00),
	(24, 3, '2025-09-27 17:30:55', '2025-09-27', 24, 'ready', 'transfer', 40.00, '2025-09-27 20:20:06.000000', NULL, 0.00, 0.00),
	(25, 3, '2025-09-27 17:30:56', '2025-09-27', 25, 'ready', 'transfer', 40.00, '2025-09-27 20:20:06.000000', NULL, 0.00, 0.00),
	(26, 3, '2025-09-27 17:34:16', '2025-09-27', 26, 'ready', 'transfer', 40.00, '2025-09-27 20:20:06.000000', NULL, 0.00, 0.00),
	(27, 3, '2025-09-27 17:34:17', '2025-09-27', 27, 'ready', 'transfer', 40.00, '2025-09-27 20:20:05.000000', NULL, 0.00, 0.00),
	(28, 3, '2025-09-27 17:35:11', '2025-09-27', 28, 'ready', 'transfer', 40.00, '2025-09-27 20:20:05.000000', NULL, 0.00, 0.00),
	(29, 3, '2025-09-27 17:35:12', '2025-09-27', 29, 'ready', 'transfer', 40.00, '2025-09-27 20:13:21.000000', NULL, 0.00, 0.00),
	(30, 3, '2025-09-27 17:36:11', '2025-09-27', 30, 'ready', 'transfer', 40.00, '2025-09-27 20:13:20.000000', NULL, 0.00, 0.00),
	(31, 3, '2025-09-27 17:36:12', '2025-09-27', 31, 'ready', 'transfer', 40.00, '2025-09-27 20:13:20.000000', NULL, 0.00, 0.00),
	(32, 3, '2025-09-27 17:41:09', '2025-09-27', 32, 'ready', 'transfer', 40.00, '2025-09-27 20:13:20.000000', NULL, 0.00, 0.00),
	(33, 3, '2025-09-27 17:41:10', '2025-09-27', 33, 'ready', 'transfer', 40.00, '2025-09-27 20:13:19.000000', NULL, 0.00, 0.00),
	(34, 3, '2025-09-27 17:41:18', '2025-09-27', 34, 'ready', 'transfer', 40.00, '2025-09-27 20:13:19.000000', NULL, 0.00, 0.00),
	(35, 3, '2025-09-27 17:45:06', '2025-09-27', 35, 'ready', 'transfer', 40.00, '2025-09-27 20:13:19.000000', NULL, 0.00, 0.00),
	(36, 3, '2025-09-27 17:45:07', '2025-09-27', 36, 'ready', 'transfer', 40.00, '2025-09-27 19:35:24.000000', NULL, 0.00, 0.00),
	(37, 1, '2025-09-27 20:20:12', '2025-09-27', 37, 'ready', 'transfer', 40.00, '2025-09-27 20:23:37.000000', NULL, 0.00, 0.00),
	(38, 1, '2025-09-27 20:24:38', '2025-09-27', 38, 'ready', 'transfer', 40.00, '2025-09-27 20:25:30.000000', NULL, 0.00, 0.00),
	(39, 3, '2025-09-27 22:03:12', '2025-09-27', 39, 'ready', 'transfer', 40.00, '2025-09-27 22:04:21.000000', NULL, 0.00, 0.00),
	(40, 3, '2025-09-27 22:04:27', '2025-09-27', 40, 'ready', 'transfer', 40.00, '2025-09-27 22:04:47.000000', NULL, 0.00, 0.00),
	(41, 3, '2025-09-27 22:08:41', '2025-09-27', 41, 'ready', 'transfer', 40.00, '2025-09-27 22:09:22.000000', NULL, 0.00, 0.00),
	(42, 3, '2025-09-27 22:08:50', '2025-09-27', 42, 'ready', 'transfer', 40.00, '2025-09-27 22:09:20.000000', NULL, 0.00, 0.00),
	(43, 3, '2025-09-27 22:30:15', '2025-09-27', 43, 'canceled', 'transfer', 80.00, '2025-09-27 22:31:11.000000', NULL, 0.00, 0.00),
	(44, 3, '2025-09-27 22:31:18', '2025-09-27', 44, 'ready', 'transfer', 40.00, '2025-09-27 22:32:06.000000', NULL, 0.00, 0.00),
	(45, 3, '2025-09-28 15:22:31', '2025-09-28', 1, 'ready', 'transfer', 40.00, '2025-09-28 16:17:59.000000', NULL, 0.00, 0.00),
	(46, 3, '2025-09-28 15:27:43', '2025-09-28', 2, 'ready', 'transfer', 40.00, '2025-09-28 16:17:59.000000', NULL, 0.00, 0.00),
	(47, 3, '2025-09-28 15:28:27', '2025-09-28', 3, 'ready', 'transfer', 40.00, '2025-09-28 16:17:58.000000', NULL, 0.00, 0.00),
	(48, 3, '2025-09-28 15:30:44', '2025-09-28', 4, 'ready', 'transfer', 40.00, '2025-09-28 16:17:58.000000', NULL, 0.00, 0.00),
	(49, 3, '2025-09-28 15:30:46', '2025-09-28', 5, 'ready', 'transfer', 40.00, '2025-09-28 16:17:58.000000', NULL, 0.00, 0.00),
	(50, 3, '2025-09-28 15:30:58', '2025-09-28', 6, 'ready', 'transfer', 40.00, '2025-09-28 16:17:56.000000', NULL, 0.00, 0.00),
	(51, 3, '2025-09-28 15:31:07', '2025-09-28', 7, 'ready', 'transfer', 40.00, '2025-09-28 16:17:56.000000', NULL, 0.00, 0.00),
	(52, 3, '2025-09-28 15:31:31', '2025-09-28', 8, 'ready', 'transfer', 40.00, '2025-09-28 16:17:56.000000', NULL, 0.00, 0.00),
	(53, 3, '2025-09-28 15:31:40', '2025-09-28', 9, 'ready', 'transfer', 40.00, '2025-09-28 16:17:55.000000', NULL, 0.00, 0.00),
	(54, 3, '2025-09-28 15:31:48', '2025-09-28', 10, 'ready', 'transfer', 40.00, '2025-09-28 16:17:55.000000', NULL, 0.00, 0.00),
	(55, 3, '2025-09-28 15:32:08', '2025-09-28', 11, 'ready', 'transfer', 40.00, '2025-09-28 16:17:55.000000', NULL, 0.00, 0.00),
	(56, 3, '2025-09-28 15:32:24', '2025-09-28', 12, 'ready', 'transfer', 40.00, '2025-09-28 16:17:54.000000', NULL, 0.00, 0.00),
	(57, 3, '2025-09-28 15:32:55', '2025-09-28', 13, 'ready', 'transfer', 40.00, '2025-09-28 16:17:54.000000', NULL, 0.00, 0.00),
	(58, 3, '2025-09-28 15:33:57', '2025-09-28', 14, 'ready', 'transfer', 40.00, '2025-09-28 16:17:54.000000', NULL, 0.00, 0.00),
	(59, 3, '2025-09-28 15:49:15', '2025-09-28', 15, 'ready', 'transfer', 40.00, '2025-09-28 16:17:53.000000', NULL, 0.00, 0.00),
	(60, 3, '2025-09-28 15:55:32', '2025-09-28', 16, 'ready', 'transfer', 40.00, '2025-09-28 16:17:53.000000', NULL, 0.00, 0.00),
	(61, 3, '2025-09-28 15:55:34', '2025-09-28', 17, 'ready', 'transfer', 40.00, '2025-09-28 16:17:53.000000', NULL, 0.00, 0.00),
	(62, 3, '2025-09-28 15:56:29', '2025-09-28', 18, 'ready', 'transfer', 40.00, '2025-09-28 16:17:52.000000', NULL, 0.00, 0.00),
	(63, 3, '2025-09-28 15:58:50', '2025-09-28', 19, 'ready', 'transfer', 40.00, '2025-09-28 16:17:52.000000', NULL, 0.00, 0.00),
	(64, 3, '2025-09-28 15:58:52', '2025-09-28', 20, 'ready', 'transfer', 40.00, '2025-09-28 16:17:51.000000', NULL, 0.00, 0.00),
	(65, 3, '2025-09-28 16:13:09', '2025-09-28', 21, 'ready', 'transfer', 40.00, '2025-09-28 16:17:51.000000', NULL, 0.00, 0.00),
	(66, 3, '2025-09-28 16:31:05', '2025-09-28', 22, 'canceled', 'transfer', 40.00, '2025-09-28 16:46:08.000000', NULL, 0.00, 0.00),
	(67, 3, '2025-09-28 16:31:42', '2025-09-28', 23, 'ready', 'transfer', 40.00, '2025-09-28 21:34:05.000000', NULL, 0.00, 0.00),
	(68, 3, '2025-09-28 16:32:30', '2025-09-28', 24, 'canceled', 'transfer', 40.00, '2025-09-28 16:34:17.000000', NULL, 0.00, 0.00),
	(69, 3, '2025-09-28 16:33:39', '2025-09-28', 25, 'ready', 'transfer', 40.00, '2025-09-28 21:34:04.000000', NULL, 0.00, 0.00),
	(70, 3, '2025-09-28 21:33:41', '2025-09-28', 26, 'ready', 'transfer', 40.00, '2025-09-28 21:34:04.000000', NULL, 0.00, 0.00),
	(71, 3, '2025-09-28 22:09:06', '2025-09-28', 27, 'canceled', 'transfer', 40.00, '2025-09-28 22:13:56.000000', NULL, 0.00, 0.00),
	(72, 3, '2025-09-28 22:09:12', '2025-09-28', 28, 'canceled', 'transfer', 40.00, '2025-09-28 22:13:56.000000', NULL, 0.00, 0.00),
	(73, 3, '2025-09-28 22:10:43', '2025-09-28', 29, 'canceled', 'transfer', 40.00, '2025-09-28 22:13:56.000000', NULL, 0.00, 0.00),
	(74, 3, '2025-09-28 22:13:45', '2025-09-28', 30, 'canceled', 'transfer', 40.00, '2025-09-28 22:13:55.000000', NULL, 0.00, 0.00),
	(75, 3, '2025-09-28 22:13:58', '2025-09-28', 31, 'canceled', 'transfer', 40.00, '2025-09-28 22:14:49.000000', NULL, 0.00, 0.00),
	(76, 1, '2025-09-28 23:20:17', '2025-09-28', 32, 'ready', 'transfer', 55.00, '2025-09-28 23:20:22.000000', NULL, 0.00, 0.00),
	(77, 3, '2025-09-29 14:42:48', '2025-09-29', 1, 'canceled', 'transfer', 36.00, '2025-09-29 20:49:44.000000', NULL, 0.00, 0.00),
	(78, 3, '2025-09-29 20:49:56', '2025-09-29', 2, 'ready', 'transfer', 46.00, '2025-09-29 20:50:26.000000', NULL, 0.00, 0.00),
	(79, 3, '2025-10-01 22:23:06', '2025-10-01', 1, 'awaiting_payment', 'transfer', 80.00, '2025-10-01 22:23:06.364230', NULL, 0.00, 0.00),
	(80, 3, '2025-10-01 22:34:30', '2025-10-01', 2, 'ready', 'transfer', 40.00, '2025-10-01 22:52:38.000000', NULL, 0.00, 0.00),
	(81, 3, '2025-10-01 22:40:48', '2025-10-01', 3, 'ready', 'transfer', 40.00, '2025-10-01 22:52:38.000000', NULL, 0.00, 0.00),
	(82, 3, '2025-10-01 22:41:55', '2025-10-01', 4, 'ready', 'transfer', 40.00, '2025-10-01 22:52:37.000000', NULL, 0.00, 0.00),
	(83, 3, '2025-10-01 22:42:10', '2025-10-01', 5, 'ready', 'transfer', 40.00, '2025-10-01 22:45:55.000000', NULL, 0.00, 0.00),
	(84, 3, '2025-10-01 22:52:50', '2025-10-01', 6, 'ready', 'transfer', 40.00, '2025-10-01 22:53:24.000000', NULL, 0.00, 0.00),
	(85, 3, '2025-10-01 22:53:26', '2025-10-01', 7, 'ready', 'transfer', 40.00, '2025-10-01 23:06:53.000000', NULL, 0.00, 0.00),
	(86, 3, '2025-10-01 22:53:28', '2025-10-01', 8, 'ready', 'transfer', 40.00, '2025-10-01 23:06:53.000000', NULL, 0.00, 0.00),
	(87, 3, '2025-10-01 22:59:51', '2025-10-01', 9, 'ready', 'transfer', 40.00, '2025-10-01 23:06:52.000000', NULL, 0.00, 0.00),
	(88, 3, '2025-10-01 23:00:29', '2025-10-01', 10, 'ready', 'transfer', 40.00, '2025-10-01 23:06:49.000000', NULL, 0.00, 0.00),
	(89, 3, '2025-10-01 23:01:36', '2025-10-01', 11, 'ready', 'transfer', 80.00, '2025-10-01 23:06:48.000000', NULL, 0.00, 0.00),
	(90, 3, '2025-10-01 23:06:57', '2025-10-01', 12, 'ready', 'transfer', 40.00, '2025-10-01 23:07:05.000000', NULL, 0.00, 0.00),
	(91, 3, '2025-10-01 23:07:21', '2025-10-01', 13, 'ready', 'transfer', 40.00, '2025-10-01 23:07:25.000000', NULL, 0.00, 0.00),
	(92, 3, '2025-10-01 23:07:30', '2025-10-01', 14, 'canceled', 'transfer', 40.00, '2025-10-01 23:14:14.000000', NULL, 0.00, 0.00),
	(93, 3, '2025-10-01 23:07:35', '2025-10-01', 15, 'canceled', 'transfer', 40.00, '2025-10-01 23:14:13.000000', NULL, 0.00, 0.00),
	(94, 3, '2025-10-01 23:07:44', '2025-10-01', 16, 'ready', 'transfer', 40.00, '2025-10-01 23:07:48.000000', NULL, 0.00, 0.00),
	(95, 3, '2025-10-01 23:14:16', '2025-10-01', 17, 'ready', 'transfer', 40.00, '2025-10-01 23:14:23.000000', NULL, 0.00, 0.00),
	(96, 3, '2025-10-01 23:14:26', '2025-10-01', 18, 'ready', 'transfer', 40.00, '2025-10-01 23:14:30.000000', NULL, 0.00, 0.00),
	(97, 3, '2025-10-01 23:14:48', '2025-10-01', 19, 'ready', 'transfer', 40.00, '2025-10-01 23:14:57.000000', NULL, 0.00, 0.00),
	(98, 3, '2025-10-01 23:15:31', '2025-10-01', 20, 'canceled', 'transfer', 40.00, '2025-10-01 23:21:55.000000', NULL, 0.00, 0.00),
	(99, 3, '2025-10-01 23:15:39', '2025-10-01', 21, 'canceled', 'transfer', 40.00, '2025-10-01 23:21:55.000000', NULL, 0.00, 0.00),
	(100, 3, '2025-10-01 23:22:01', '2025-10-01', 22, 'ready', 'transfer', 40.00, '2025-10-01 23:24:06.000000', NULL, 0.00, 0.00),
	(101, 3, '2025-10-01 23:28:46', '2025-10-01', 23, 'ready', 'transfer', 80.00, '2025-10-01 23:29:01.000000', NULL, 0.00, 0.00),
	(102, 3, '2025-10-01 23:29:03', '2025-10-01', 24, 'ready', 'transfer', 40.00, '2025-10-01 23:29:08.000000', NULL, 0.00, 0.00),
	(103, 3, '2025-10-01 23:29:12', '2025-10-01', 25, 'ready', 'transfer', 40.00, '2025-10-01 23:43:32.000000', NULL, 0.00, 0.00),
	(104, 3, '2025-10-01 23:34:46', '2025-10-01', 26, 'ready', 'transfer', 40.00, '2025-10-01 23:43:30.000000', NULL, 0.00, 0.00),
	(105, 3, '2025-10-01 23:35:11', '2025-10-01', 27, 'ready', 'transfer', 40.00, '2025-10-01 23:43:29.000000', NULL, 0.00, 0.00),
	(106, 3, '2025-10-01 23:42:55', '2025-10-01', 28, 'ready', 'transfer', 40.00, '2025-10-01 23:43:29.000000', NULL, 0.00, 0.00),
	(107, 3, '2025-10-01 23:43:37', '2025-10-01', 29, 'ready', 'transfer', 40.00, '2025-10-01 23:43:39.000000', NULL, 0.00, 0.00),
	(108, 3, '2025-10-02 00:00:28', '2025-10-02', 1, 'ready', 'transfer', 40.00, '2025-10-02 00:00:42.000000', NULL, 0.00, 0.00),
	(109, 3, '2025-10-02 00:01:43', '2025-10-02', 2, 'ready', 'transfer', 40.00, '2025-10-02 00:01:47.000000', NULL, 0.00, 0.00),
	(110, 3, '2025-10-02 00:40:17', '2025-10-02', 3, 'ready', 'transfer', 40.00, '2025-10-02 10:26:49.000000', NULL, 0.00, 0.00),
	(111, 3, '2025-10-02 00:47:41', '2025-10-02', 4, 'ready', 'transfer', 40.00, '2025-10-02 10:26:44.000000', NULL, 0.00, 0.00),
	(112, 3, '2025-10-02 09:25:27', '2025-10-02', 5, 'ready', 'transfer', 40.00, '2025-10-02 10:26:43.000000', NULL, 0.00, 0.00),
	(113, 3, '2025-10-02 09:29:56', '2025-10-02', 6, 'ready', 'transfer', 40.00, '2025-10-02 10:26:43.000000', NULL, 0.00, 0.00),
	(114, 3, '2025-10-02 09:29:58', '2025-10-02', 7, 'ready', 'transfer', 40.00, '2025-10-02 10:26:43.000000', NULL, 0.00, 0.00),
	(115, 3, '2025-10-02 09:30:23', '2025-10-02', 8, 'ready', 'transfer', 40.00, '2025-10-02 10:26:42.000000', NULL, 0.00, 0.00),
	(116, 3, '2025-10-02 09:30:40', '2025-10-02', 9, 'ready', 'transfer', 40.00, '2025-10-02 10:26:42.000000', NULL, 0.00, 0.00),
	(117, 3, '2025-10-02 09:31:00', '2025-10-02', 10, 'ready', 'transfer', 40.00, '2025-10-02 10:26:42.000000', NULL, 0.00, 0.00),
	(118, 3, '2025-10-02 09:31:27', '2025-10-02', 11, 'ready', 'transfer', 40.00, '2025-10-02 10:26:41.000000', NULL, 0.00, 0.00),
	(119, 3, '2025-10-02 09:32:05', '2025-10-02', 12, 'ready', 'transfer', 40.00, '2025-10-02 10:26:41.000000', NULL, 0.00, 0.00),
	(120, 3, '2025-10-02 10:05:01', '2025-10-02', 13, 'ready', 'transfer', 38.00, '2025-10-02 10:05:20.000000', NULL, 0.00, 0.00),
	(121, 3, '2025-10-02 10:55:35', '2025-10-02', 14, 'canceled', 'transfer', 38.00, '2025-10-02 10:55:42.000000', NULL, 0.00, 0.00),
	(122, 3, '2025-10-02 10:59:27', '2025-10-02', 15, 'canceled', 'transfer', 40.00, '2025-10-02 10:59:34.000000', NULL, 0.00, 0.00),
	(123, 3, '2025-10-02 11:00:02', '2025-10-02', 16, 'canceled', 'transfer', 40.00, '2025-10-02 11:00:09.000000', NULL, 0.00, 0.00),
	(124, 3, '2025-10-03 23:32:56', '2025-10-03', 1, 'canceled', 'transfer', 40.00, '2025-10-04 12:39:54.000000', NULL, 0.00, 0.00),
	(125, 3, '2025-10-04 12:39:42', '2025-10-04', 1, 'canceled', 'transfer', 500.00, '2025-10-04 12:39:50.000000', NULL, 0.00, 0.00),
	(126, 3, '2025-10-04 12:40:00', '2025-10-04', 2, 'ready', 'transfer', 500.00, '2025-10-04 12:40:08.000000', NULL, 0.00, 0.00),
	(127, 3, '2025-10-04 12:59:59', '2025-10-04', 3, 'ready', 'transfer', 400.00, '2025-10-04 13:00:04.000000', NULL, 0.00, 0.00),
	(128, 3, '2025-10-05 14:58:05', '2025-10-05', 1, 'canceled', 'transfer', 40.00, '2025-10-05 15:44:28.000000', NULL, 0.00, 0.00),
	(129, 3, '2025-10-08 09:32:36', '2025-10-08', 1, 'canceled', 'transfer', 38.00, '2025-10-09 12:14:20.000000', NULL, 0.00, 0.00),
	(130, 3, '2025-10-08 09:34:41', '2025-10-08', 2, 'canceled', 'transfer', 38.00, '2025-10-09 12:14:21.000000', NULL, 0.00, 0.00),
	(131, 3, '2025-10-09 12:14:28', '2025-10-09', 1, 'canceled', 'transfer', 40.00, '2025-10-09 12:20:01.000000', NULL, 0.00, 0.00),
	(132, 3, '2025-10-09 12:20:08', '2025-10-09', 2, 'canceled', 'transfer', 40.00, '2025-10-09 13:50:51.000000', NULL, 0.00, 0.00),
	(133, 3, '2025-10-09 12:20:39', '2025-10-09', 3, 'canceled', 'transfer', 40.00, '2025-10-09 12:27:56.000000', NULL, 0.00, 0.00),
	(134, 3, '2025-10-09 13:50:42', '2025-10-09', 4, 'ready', 'transfer', 40.00, '2025-10-09 13:50:54.000000', NULL, 0.00, 0.00);

-- Dumping structure for table psu_blue_cafe.order_counters
CREATE TABLE IF NOT EXISTS `order_counters` (
  `order_date` date NOT NULL,
  `last_seq` int(11) NOT NULL,
  PRIMARY KEY (`order_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.order_counters: ~10 rows (approximately)
INSERT INTO `order_counters` (`order_date`, `last_seq`) VALUES
	('2025-09-27', 44),
	('2025-09-28', 32),
	('2025-09-29', 2),
	('2025-10-01', 29),
	('2025-10-02', 16),
	('2025-10-03', 1),
	('2025-10-04', 3),
	('2025-10-05', 1),
	('2025-10-08', 2),
	('2025-10-09', 4);

-- Dumping structure for table psu_blue_cafe.order_details
CREATE TABLE IF NOT EXISTS `order_details` (
  `order_detail_id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `menu_id` int(11) NOT NULL,
  `promo_id` int(11) DEFAULT NULL,
  `quantity` int(11) NOT NULL,
  `note` varchar(255) DEFAULT NULL,
  `total_price` decimal(10,2) NOT NULL,
  PRIMARY KEY (`order_detail_id`),
  KEY `fk_details_order` (`order_id`),
  KEY `fk_details_menu` (`menu_id`),
  KEY `fk_details_promo` (`promo_id`),
  CONSTRAINT `fk_details_menu` FOREIGN KEY (`menu_id`) REFERENCES `menu` (`menu_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_details_order` FOREIGN KEY (`order_id`) REFERENCES `orders` (`order_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_details_promo` FOREIGN KEY (`promo_id`) REFERENCES `promotions` (`promo_id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=159 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Dumping data for table psu_blue_cafe.order_details: ~158 rows (approximately)
INSERT INTO `order_details` (`order_detail_id`, `order_id`, `menu_id`, `promo_id`, `quantity`, `note`, `total_price`) VALUES
	(1, 1, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(2, 2, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(3, 3, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(4, 4, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(5, 5, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(6, 6, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(7, 7, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(8, 8, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(9, 9, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(10, 10, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(11, 11, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(12, 11, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(13, 12, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(14, 12, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(15, 13, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(16, 14, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(17, 15, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(18, 16, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(19, 17, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(20, 18, 9, 7, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(21, 19, 7, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(22, 19, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(23, 19, 9, 7, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(24, 19, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(25, 19, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(26, 19, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(27, 19, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(28, 19, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(29, 19, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(30, 19, 16, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(31, 19, 17, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(32, 19, 18, 7, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(33, 19, 19, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(34, 19, 20, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(35, 19, 21, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(36, 19, 22, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(37, 19, 23, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(38, 19, 24, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(39, 19, 25, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 25.00),
	(40, 20, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(41, 21, 10, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(42, 22, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(43, 23, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(44, 24, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(45, 25, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(46, 26, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(47, 27, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(48, 28, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(49, 29, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(50, 30, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(51, 31, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(52, 32, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(53, 33, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(54, 34, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(55, 35, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(56, 36, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(57, 37, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(58, 38, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(59, 39, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(60, 40, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(61, 41, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(62, 42, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(63, 43, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(64, 43, 17, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(65, 44, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(66, 45, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(67, 46, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(68, 47, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(69, 48, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(70, 49, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(71, 50, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(72, 51, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(73, 52, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(74, 53, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(75, 54, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(76, 55, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(77, 56, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(78, 57, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(79, 58, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(80, 59, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(81, 60, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(82, 61, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(83, 62, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(84, 63, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(85, 64, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(86, 65, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(87, 66, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(88, 67, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(89, 68, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(90, 69, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(91, 70, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(92, 71, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(93, 72, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(94, 73, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(95, 74, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(96, 75, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(97, 76, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ | ท็อปปิง: วิปครีม, เจลลี่', 55.00),
	(98, 77, 9, 8, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 36.00),
	(99, 78, 9, 8, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ | ท็อปปิง: วิปครีม', 46.00),
	(100, 79, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(101, 79, 20, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(102, 80, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(103, 81, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(104, 82, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(105, 83, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(106, 84, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(107, 85, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(108, 86, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(109, 87, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(110, 88, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(111, 89, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(112, 89, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(113, 90, 18, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(114, 91, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(115, 92, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(116, 93, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(117, 94, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(118, 95, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(119, 96, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(120, 97, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(121, 98, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(122, 99, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(123, 100, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(124, 101, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(125, 101, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(126, 102, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(127, 103, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(128, 104, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(129, 105, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(130, 106, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(131, 107, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(132, 108, 9, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(133, 109, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(134, 110, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(135, 111, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(136, 112, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(137, 113, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(138, 114, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(139, 115, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(140, 116, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(141, 117, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(142, 118, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(143, 119, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(144, 120, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(145, 121, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(146, 122, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(147, 123, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(148, 124, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(149, 125, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 500.00),
	(150, 126, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 500.00),
	(151, 127, 8, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 400.00),
	(152, 128, 19, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(153, 129, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(154, 130, 15, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 38.00),
	(155, 131, 13, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(156, 132, 11, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(157, 133, 12, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00),
	(158, 134, 14, NULL, 1, 'ขนาด: ธรรมดา | หวาน: ปกติ | น้ำแข็ง: ปกติ', 40.00);

-- Dumping structure for table psu_blue_cafe.payment_slips
CREATE TABLE IF NOT EXISTS `payment_slips` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `file_path` varchar(255) NOT NULL,
  `mime` varchar(64) NOT NULL,
  `size_bytes` int(11) NOT NULL,
  `uploaded_at` datetime(6) NOT NULL,
  `note` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `order_id` (`order_id`),
  KEY `idx_slips_order_uploaded` (`order_id`,`uploaded_at`)
) ENGINE=InnoDB AUTO_INCREMENT=79 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.payment_slips: ~70 rows (approximately)
INSERT INTO `payment_slips` (`id`, `order_id`, `user_id`, `file_path`, `mime`, `size_bytes`, `uploaded_at`, `note`) VALUES
	(1, 326, 3, 'uploads/slips/slip_326_20250906_110414_a70b62.jpg', 'image/jpeg', 26584, '2025-09-06 16:04:14.000000', ''),
	(2, 328, 3, 'uploads/slips/slip_328_20250906_115041_2950ec.jpg', 'image/jpeg', 26584, '2025-09-06 16:50:41.000000', ''),
	(3, 333, 3, 'uploads/slips/slip_333_20250906_134020_26e84e.jpg', 'image/jpeg', 26584, '2025-09-06 18:40:20.000000', ''),
	(4, 337, 3, 'uploads/slips/slip_337_20250906_134100_5adac2.jpg', 'image/jpeg', 26584, '2025-09-06 18:41:00.000000', ''),
	(5, 342, 3, 'uploads/slips/slip_342_20250906_135617_d8ea50.jpg', 'image/jpeg', 26584, '2025-09-06 18:56:17.000000', ''),
	(6, 343, 3, 'uploads/slips/slip_343_20250906_135825_40aaae.jpg', 'image/jpeg', 26584, '2025-09-06 18:58:25.000000', ''),
	(7, 344, 3, 'uploads/slips/slip_344_20250906_141548_e7de82.jpg', 'image/jpeg', 26584, '2025-09-06 19:15:48.000000', ''),
	(8, 345, 3, 'uploads/slips/slip_345_20250906_141614_49b25a.jpg', 'image/jpeg', 26584, '2025-09-06 19:16:14.000000', ''),
	(9, 346, 3, 'uploads/slips/slip_346_20250906_142859_bb26d4.jpg', 'image/jpeg', 26584, '2025-09-06 19:28:59.000000', ''),
	(10, 346, 3, 'uploads/slips/slip_346_20250906_142901_24374e.jpg', 'image/jpeg', 26584, '2025-09-06 19:29:01.000000', ''),
	(11, 346, 3, 'uploads/slips/slip_346_20250906_142901_23eb93.jpg', 'image/jpeg', 26584, '2025-09-06 19:29:01.000000', ''),
	(12, 346, 3, 'uploads/slips/slip_346_20250906_142910_c182ae.jpg', 'image/jpeg', 26584, '2025-09-06 19:29:10.000000', ''),
	(13, 346, 3, 'uploads/slips/slip_346_20250906_142917_509460.jpg', 'image/jpeg', 26584, '2025-09-06 19:29:17.000000', ''),
	(14, 347, 3, 'uploads/slips/slip_347_20250906_145611_cf5e09.jpg', 'image/jpeg', 26584, '2025-09-06 19:56:11.000000', ''),
	(15, 349, 3, 'uploads/slips/slip_349_20250906_145833_ffb391.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:33.000000', ''),
	(16, 349, 3, 'uploads/slips/slip_349_20250906_145834_dd7aa8.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:34.000000', ''),
	(17, 349, 3, 'uploads/slips/slip_349_20250906_145834_93e794.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:34.000000', ''),
	(18, 349, 3, 'uploads/slips/slip_349_20250906_145834_1a5b3d.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:34.000000', ''),
	(19, 349, 3, 'uploads/slips/slip_349_20250906_145834_53f07d.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:34.000000', ''),
	(20, 349, 3, 'uploads/slips/slip_349_20250906_145835_208c65.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:35.000000', ''),
	(21, 349, 3, 'uploads/slips/slip_349_20250906_145835_7ddf8a.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:35.000000', ''),
	(22, 349, 3, 'uploads/slips/slip_349_20250906_145835_7a0a83.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:35.000000', ''),
	(23, 349, 3, 'uploads/slips/slip_349_20250906_145835_f2cd81.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:35.000000', ''),
	(24, 349, 3, 'uploads/slips/slip_349_20250906_145835_587465.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:35.000000', ''),
	(25, 349, 3, 'uploads/slips/slip_349_20250906_145836_be224b.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:36.000000', ''),
	(26, 349, 3, 'uploads/slips/slip_349_20250906_145849_d90801.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:49.000000', ''),
	(27, 349, 3, 'uploads/slips/slip_349_20250906_145850_e32336.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:50.000000', ''),
	(28, 349, 3, 'uploads/slips/slip_349_20250906_145856_40d238.jpg', 'image/jpeg', 26584, '2025-09-06 19:58:56.000000', ''),
	(29, 349, 3, 'uploads/slips/slip_349_20250906_145942_1b6b46.jpg', 'image/jpeg', 26584, '2025-09-06 19:59:42.000000', ''),
	(30, 350, 3, 'uploads/slips/slip_350_20250906_150008_206fcd.jpg', 'image/jpeg', 26584, '2025-09-06 20:00:08.000000', ''),
	(31, 351, 3, 'uploads/slips/slip_351_20250906_150031_1ebed5.jpg', 'image/jpeg', 26584, '2025-09-06 20:00:31.000000', ''),
	(32, 352, 3, 'uploads/slips/slip_352_20250906_150051_5d6615.jpg', 'image/jpeg', 26584, '2025-09-06 20:00:51.000000', ''),
	(33, 353, 3, 'uploads/slips/slip_353_20250906_150140_c0bbd0.jpg', 'image/jpeg', 26584, '2025-09-06 20:01:40.000000', ''),
	(34, 354, 3, 'uploads/slips/slip_354_20250906_150205_d59e4f.jpg', 'image/jpeg', 26584, '2025-09-06 20:02:05.000000', ''),
	(35, 355, 3, 'uploads/slips/slip_355_20250906_150219_1eddea.jpg', 'image/jpeg', 26584, '2025-09-06 20:02:19.000000', ''),
	(36, 356, 3, 'uploads/slips/slip_356_20250906_150233_4be900.jpg', 'image/jpeg', 26584, '2025-09-06 20:02:33.000000', ''),
	(37, 357, 3, 'uploads/slips/slip_357_20250906_150310_89a6c3.jpg', 'image/jpeg', 26584, '2025-09-06 20:03:10.000000', ''),
	(38, 358, 3, 'uploads/slips/slip_358_20250906_150321_5e8f5d.jpg', 'image/jpeg', 26584, '2025-09-06 20:03:21.000000', ''),
	(39, 359, 3, 'uploads/slips/slip_359_20250906_150333_e94d0b.jpg', 'image/jpeg', 26584, '2025-09-06 20:03:33.000000', ''),
	(40, 360, 3, 'uploads/slips/slip_360_20250906_150346_bc32a6.jpg', 'image/jpeg', 26584, '2025-09-06 20:03:46.000000', ''),
	(41, 361, 3, 'uploads/slips/slip_361_20250906_150356_b55ca0.jpg', 'image/jpeg', 26584, '2025-09-06 20:03:56.000000', ''),
	(42, 363, 3, 'uploads/slips/slip_363_20250906_152112_0b917b.jpg', 'image/jpeg', 26584, '2025-09-06 20:21:12.000000', ''),
	(43, 364, 3, 'uploads/slips/slip_364_20250906_152126_2e8bf5.jpg', 'image/jpeg', 26584, '2025-09-06 20:21:26.000000', ''),
	(44, 365, 3, 'uploads/slips/slip_365_20250906_152806_876485.jpg', 'image/jpeg', 26584, '2025-09-06 20:28:06.000000', ''),
	(45, 366, 3, 'uploads/slips/slip_366_20250906_152829_c1ef9e.jpg', 'image/jpeg', 26584, '2025-09-06 20:28:29.000000', ''),
	(46, 367, 3, 'uploads/slips/slip_367_20250906_152951_1e2378.jpg', 'image/jpeg', 26584, '2025-09-06 20:29:51.000000', ''),
	(47, 368, 3, 'uploads/slips/slip_368_20250906_153121_7a65f3.jpg', 'image/jpeg', 26584, '2025-09-06 20:31:21.000000', ''),
	(48, 369, 3, 'uploads/slips/slip_369_20250906_154100_4b331c.jpg', 'image/jpeg', 26584, '2025-09-06 20:41:00.000000', ''),
	(49, 370, 3, 'uploads/slips/slip_370_20250906_154129_c3bb32.jpg', 'image/jpeg', 26584, '2025-09-06 20:41:29.000000', ''),
	(50, 371, 3, 'uploads/slips/slip_371_20250906_154147_2c7a56.jpg', 'image/jpeg', 26584, '2025-09-06 20:41:47.000000', ''),
	(51, 372, 3, 'uploads/slips/slip_372_20250906_155401_b69ab7.jpg', 'image/jpeg', 26584, '2025-09-06 20:54:01.000000', ''),
	(52, 373, 3, 'uploads/slips/slip_373_20250906_155420_f414a3.jpg', 'image/jpeg', 26584, '2025-09-06 20:54:20.000000', ''),
	(53, 374, 3, 'uploads/slips/slip_374_20250906_155437_8c3035.jpg', 'image/jpeg', 26584, '2025-09-06 20:54:37.000000', ''),
	(54, 375, 3, 'uploads/slips/slip_375_20250906_161813_907d8a.jpg', 'image/jpeg', 26584, '2025-09-06 21:18:13.000000', ''),
	(55, 376, 3, 'uploads/slips/slip_376_20250906_161825_779d11.jpg', 'image/jpeg', 26584, '2025-09-06 21:18:25.000000', ''),
	(56, 377, 3, 'uploads/slips/slip_377_20250906_161842_d8097b.jpg', 'image/jpeg', 26584, '2025-09-06 21:18:42.000000', ''),
	(57, 378, 3, 'uploads/slips/slip_378_20250906_161957_3725dc.jpg', 'image/jpeg', 26584, '2025-09-06 21:19:57.000000', ''),
	(58, 387, 3, 'uploads/slips/slip_387_20250906_170625_adc577.jpg', 'image/jpeg', 26584, '2025-09-06 22:06:25.000000', ''),
	(59, 389, 3, 'uploads/slips/slip_389_20250906_181504_aca35b.jpg', 'image/jpeg', 26584, '2025-09-06 23:15:04.000000', ''),
	(60, 403, 3, 'uploads/slips/slip_403_20250906_210453_9b439c.jpg', 'image/jpeg', 26584, '2025-09-07 02:04:53.000000', ''),
	(61, 404, 3, 'uploads/slips/slip_404_20250906_210505_5c71e9.jpg', 'image/jpeg', 26584, '2025-09-07 02:05:05.000000', ''),
	(62, 405, 3, 'uploads/slips/slip_405_20250906_210600_51513c.jpg', 'image/jpeg', 26584, '2025-09-07 02:06:00.000000', ''),
	(63, 406, 3, 'uploads/slips/slip_406_20250906_210621_730034.jpg', 'image/jpeg', 26584, '2025-09-07 02:06:21.000000', ''),
	(64, 411, 3, 'uploads/slips/slip_411_20250906_220232_f564f3.jpg', 'image/jpeg', 26584, '2025-09-07 03:02:32.000000', ''),
	(65, 413, 3, 'uploads/slips/slip_413_20250906_221544_c810b6.jpg', 'image/jpeg', 26584, '2025-09-07 03:15:44.000000', ''),
	(66, 506, 3, 'uploads/slips/slip_506_20250918_080830_4e6d9d.jpg', 'image/jpeg', 67406, '2025-09-18 13:08:30.000000', ''),
	(67, 507, 3, 'uploads/slips/slip_507_20250918_082243_9130e6.jpg', 'image/jpeg', 67576, '2025-09-18 13:22:43.000000', ''),
	(68, 21, 3, 'uploads/slips/slip_21_20250927_114924_1d5bf9.jpg', 'image/jpeg', 63796, '2025-09-27 16:49:24.000000', ''),
	(69, 69, 3, 'uploads/slips/slip_69_20250928_113403_a0db21.jpg', 'image/jpeg', 102240, '2025-09-28 16:34:03.000000', ''),
	(70, 78, 3, 'uploads/slips/slip_78_20250929_155008_c277f2.jpg', 'image/jpeg', 32685, '2025-09-29 20:50:08.000000', ''),
	(71, 87, 3, 'uploads/slips/slip_87_20251001_225955_19aaea.jpg', 'image/jpeg', 44373, '2025-10-01 22:59:55.000000', ''),
	(72, 87, 3, 'uploads/slips/slip_87_20251001_225955_098e46.jpg', 'image/jpeg', 44373, '2025-10-01 22:59:55.000000', ''),
	(73, 87, 3, 'uploads/slips/slip_87_20251001_225956_34f431.jpg', 'image/jpeg', 44373, '2025-10-01 22:59:56.000000', ''),
	(74, 87, 3, 'uploads/slips/slip_87_20251001_225957_b4365c.jpg', 'image/jpeg', 44373, '2025-10-01 22:59:57.000000', ''),
	(75, 87, 3, 'uploads/slips/slip_87_20251001_225957_951d06.jpg', 'image/jpeg', 44373, '2025-10-01 22:59:57.000000', ''),
	(76, 89, 3, 'uploads/slips/slip_89_20251001_230141_254dd6.jpg', 'image/jpeg', 17658, '2025-10-01 23:01:41.000000', ''),
	(77, 105, 3, 'uploads/slips/slip_105_20251001_233515_b85362.jpg', 'image/jpeg', 17658, '2025-10-01 23:35:15.000000', ''),
	(78, 106, 3, 'uploads/slips/slip_106_20251001_234259_8f886d.jpg', 'image/jpeg', 17658, '2025-10-01 23:42:59.000000', '');

-- Dumping structure for table psu_blue_cafe.promotions
CREATE TABLE IF NOT EXISTS `promotions` (
  `promo_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `scope` enum('ORDER','ITEM') NOT NULL DEFAULT 'ITEM',
  `discount_type` enum('PERCENT','FIXED') NOT NULL DEFAULT 'PERCENT',
  `discount_value` decimal(10,2) NOT NULL,
  `min_order_total` decimal(10,2) DEFAULT NULL,
  `max_discount` decimal(10,2) DEFAULT NULL,
  `start_at` datetime NOT NULL,
  `end_at` datetime NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `usage_limit` int(11) DEFAULT NULL,
  `used_count` int(11) NOT NULL DEFAULT 0,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`promo_id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.promotions: ~7 rows (approximately)
INSERT INTO `promotions` (`promo_id`, `name`, `scope`, `discount_type`, `discount_value`, `min_order_total`, `max_discount`, `start_at`, `end_at`, `is_active`, `usage_limit`, `used_count`, `created_at`, `updated_at`) VALUES
	(1, 'ลด 5', 'ITEM', 'PERCENT', 5.00, NULL, NULL, '2025-09-08 20:29:00', '2025-09-17 20:30:00', 1, NULL, 0, '2025-09-09 20:30:01', '2025-09-11 19:29:48'),
	(2, 'มัทฉะ', 'ITEM', 'PERCENT', 11.00, NULL, NULL, '2025-06-09 21:07:00', '2025-09-04 21:07:00', 0, NULL, 0, '2025-09-09 21:07:11', '2025-09-11 19:29:31'),
	(3, '10', 'ITEM', 'PERCENT', 10.00, NULL, NULL, '2025-09-08 19:30:00', '2025-09-18 19:30:00', 1, NULL, 0, '2025-09-11 19:30:43', '2025-09-11 19:30:43'),
	(4, 'ฉลองการเเต่งงาน', 'ITEM', 'PERCENT', 10.00, NULL, NULL, '2025-09-01 19:30:00', '2025-09-20 19:30:00', 0, NULL, 0, '2025-09-11 19:35:45', '2025-09-18 12:32:16'),
	(6, 'PUBG', 'ITEM', 'PERCENT', 5.00, NULL, NULL, '2025-09-16 13:37:00', '2025-09-25 13:37:00', 0, NULL, 0, '2025-09-18 13:37:43', '2025-09-27 01:15:40'),
	(7, 'มัทฉะ', 'ITEM', 'PERCENT', 5.00, NULL, NULL, '2025-09-27 13:34:00', '2025-10-03 13:34:00', 1, NULL, 0, '2025-09-27 13:34:21', '2025-10-08 09:55:08'),
	(8, 'มัทฉะ', 'ITEM', 'PERCENT', 10.00, NULL, NULL, '2025-09-17 21:26:00', '2025-09-30 21:26:00', 1, NULL, 0, '2025-09-28 21:26:57', '2025-10-08 10:21:02');

-- Dumping structure for table psu_blue_cafe.promotion_items
CREATE TABLE IF NOT EXISTS `promotion_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `promo_id` int(11) NOT NULL,
  `menu_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_promo_menu` (`promo_id`,`menu_id`),
  KEY `idx_menu` (`menu_id`),
  CONSTRAINT `fk_pi_menu` FOREIGN KEY (`menu_id`) REFERENCES `menu` (`menu_id`) ON DELETE CASCADE,
  CONSTRAINT `fk_pi_promo` FOREIGN KEY (`promo_id`) REFERENCES `promotions` (`promo_id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.promotion_items: ~13 rows (approximately)
INSERT INTO `promotion_items` (`id`, `promo_id`, `menu_id`) VALUES
	(1, 1, 9),
	(3, 2, 14),
	(2, 2, 15),
	(4, 3, 10),
	(8, 3, 14),
	(10, 4, 14),
	(7, 4, 15),
	(6, 4, 16),
	(12, 7, 9),
	(13, 7, 18),
	(15, 8, 9),
	(14, 8, 15),
	(16, 8, 19);

-- Dumping structure for table psu_blue_cafe.recipes
CREATE TABLE IF NOT EXISTS `recipes` (
  `recipe_id` int(11) NOT NULL AUTO_INCREMENT,
  `menu_id` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `recipe_text` longtext NOT NULL,
  `created_at` datetime NOT NULL DEFAULT current_timestamp(),
  `updated_at` datetime NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`recipe_id`),
  KEY `fk_recipes_menu` (`menu_id`),
  CONSTRAINT `fk_recipes_menu` FOREIGN KEY (`menu_id`) REFERENCES `menu` (`menu_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.recipes: ~9 rows (approximately)
INSERT INTO `recipes` (`recipe_id`, `menu_id`, `title`, `recipe_text`, `created_at`, `updated_at`) VALUES
	(1, 19, 'นมชมพู', 'วิธีทำ\r\n1. ใส่ส่วนผสมต่อไปนี้ลงในแก้วเสิร์ฟคนให้เข้ากัน\r\nMilk						50 	ml 	(นมสด)\r\nPink Syrup					40 	ml	(Hale’s Blue Boy สีแดงรสสละ)\r\nNon-Dairy Half Creamer Fresh Milk	30 	ml 	(นมข้นจืด/ ครีมเทียมพร่องไขมันสูตรผสมนมสด)\r\nWater						30	ml\r\n2. เติมน้ำแข็ง แล้วเสิร์ฟ', '2025-10-05 14:47:41', '2025-10-05 15:02:34'),
	(3, 8, 'โซดาพาณิชย์', '1. ใส่ส่วนผสมลงในแก้วเสิร์ฟแล้วคนให้เข้ากันเป็น base ในแก้ว 16 oz.\r\nBlue Hawaii Syrup				15 	ml 	(ไซรัปบลูฮาวาย)\r\nLychee Syrup				15 	ml	(ไซรัปลิ้นจี่)\r\nSoda						10 	ml 	\r\n2. เติมน้ำแข็ง \r\n3. เติม 	Soda						Fill-up 		(ใส่จนเต็มแก้ว)', '2025-10-05 15:04:11', '2025-10-05 15:04:21'),
	(4, 16, 'บ๊วยโซดา', '1. ใส่ส่วนผสมลงในแก้วชง\r\nPlum Pickle					1 	piece	(บ๊วย 1 เม็ด)\r\nPlum Pickle Juice				30	ml 	(น้ำบ๊วยดอง)\r\nSyrup						30 	ml	(น้ำเชื่อม)\r\nHot Water					10	ml\r\n2. เตรียมแก้วเสิร์ฟใส่น้ำแข็งเต็มแก้ว\r\n3. เทส่วนที่ผสมไว้แล้วจากแก้วชงลงในแก้วเสิร์ฟ 16 oz.\r\n4. เติม 	Soda						Fill-up 		(ใส่จนเต็มแก้ว)', '2025-10-05 15:05:08', '2025-10-05 15:05:08'),
	(5, 20, 'มะพร้าวโยเกิร์ต', '1. ใส่	Coconut Juice				70	ml 	ลงเป็น base ในแก้วเสิร์ฟ 16 oz.\r\n2. เติมน้ำแข็ง \r\n3. พักรอไว้\r\n4. ใส่ส่วนผสมลงในแก้วชง	\r\nYogurt Syrup					30 	ml\r\nNon-Dairy Half Creamer Fresh Milk	10 	ml 	(นมข้นจืด/ ครีมเทียมพร่องไขมันสูตรผสมนมสด) 5. คนให้เข้ากัน\r\n6. เทส่วนที่ผสมไว้แล้วจากแก้วชงลงในแก้วเสิร์ฟ 16 oz. เป็น Topping แล้วเสิร์ฟ', '2025-10-05 15:05:35', '2025-10-05 15:05:35'),
	(6, 15, 'โซดา’ถาปัตย์', '1. ใส่ส่วนผสมลงในแก้วเสิร์ฟแล้วคนให้เข้ากันเป็น base ในแก้ว 16 oz.\r\nGrape Syrup					15 	ml 	(ไซรัปองุ่น)\r\nPassion Fruit Syrup				15 	ml	(ไซรัปเสาวรส)\r\nSoda						10 	ml 	\r\n2. เติมน้ำแข็ง \r\n3. เติม 	Soda						Fill-up 		(ใส่จนเต็มแก้ว)', '2025-10-05 15:06:28', '2025-10-05 15:06:28'),
	(7, 23, 'ชาเขียวลิ้นจี่', '1. ใส่ส่วนผสมลงในแก้วเสิร์ฟแล้วคนให้เข้ากันเป็น base ในแก้ว 16 oz.\r\nTea (based)					100	ml 	(ชาที่สกัดเตรียมไว้แล้ว) \r\nWater						50	ml\r\nLychee Syrup				30 	ml	(น้ำเชื่อม)\r\n2. เติมน้ำแข็งแล้วเสิร์ฟ', '2025-10-05 15:07:15', '2025-10-05 15:07:15'),
	(8, 12, 'ชาดำเย็น', '1. ใส่ส่วนผสมลงในแก้วเสิร์ฟแล้วคนให้เข้ากันเป็น base ในแก้ว 16 oz.\r\nTea (based)					100	ml 	(ชาที่สกัดเตรียมไว้แล้ว) \r\nWater						50	ml\r\nSyrup						30 	ml	(น้ำเชื่อม)\r\n2. เติมน้ำแข็งแล้วเสิร์ฟ', '2025-10-05 15:07:43', '2025-10-05 15:07:43'),
	(9, 17, 'โอวัลตินเย็น', '1. ใส่ส่วนผสมลงในแก้วชง\r\nOvaltine Powder				2 	Teaspoons (ช้อนชา)\r\nHot Water					100	ml\r\n2. คนให้เข้ากัน\r\n3. เติม	Sweetened Condensed Milk			30 	ml 	(นมข้นหวาน)\r\nNon-Dairy Half Creamer Fresh Milk		30 	ml 	(นมข้นจืด/ ครีมเทียมพร่องไขมันสูตรผสมนมสด)\r\n4. เทลงในแก้วเสิร์ฟ 16 oz. ที่ใส่น้ำแข็งเต็มแก้วเตรียมไว้\r\n5. โรยหน้า Topping ด้วยผงโอวัลติน', '2025-10-05 15:08:22', '2025-10-05 15:08:32'),
	(10, 18, 'โกโก้เย็น', '1. ใส่ส่วนผสมลงในแก้วชง\r\nCocoa Powder					1 	Teaspoons (ช้อนชา)\r\nHot Water						100	ml\r\n2. คนให้เข้ากัน\r\n3. เติม	Sweetened Condensed Milk			30 	ml 	(นมข้นหวาน)\r\nNon-Dairy Half Creamer Fresh Milk		30 	ml 	(นมข้นจืด/ ครีมเทียมพร่องไขมันสูตรผสมนมสด)\r\n4. เทลงในแก้วเสิร์ฟ 16 oz. ที่ใส่น้ำแข็งเต็มแก้วเตรียมไว้\r\n5. โรยหน้า Topping ด้วยผงโอวัลติน', '2025-10-05 15:09:14', '2025-10-05 15:09:20'),
	(11, 21, 'นมสดสตรอเบอรี่', '1. ใส่ส่วนผสมลงในแก้วเสิร์ฟเป็น base ในแก้ว 16 oz.\r\nStrawberry Syrup				30 	ml 	(ไซรัปสตรอเบอรี่)\r\n2. เติมน้ำแข็งเต็มแก้ว\r\n3. ใส่	Milk', '2025-10-05 15:09:43', '2025-10-05 15:09:43');

-- Dumping structure for table psu_blue_cafe.toppings
CREATE TABLE IF NOT EXISTS `toppings` (
  `topping_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(80) NOT NULL,
  `base_price` decimal(10,2) NOT NULL DEFAULT 0.00,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`topping_id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.toppings: ~5 rows (approximately)
INSERT INTO `toppings` (`topping_id`, `name`, `base_price`, `is_active`) VALUES
	(1, 'ไข่มุก', 5.00, 1),
	(2, 'เจลลี่', 5.00, 1),
	(3, 'พุดดิ้ง', 7.00, 1),
	(4, 'วิปครีม', 10.00, 1),
	(5, 'เฉาก๊วย', 5.00, 1);

-- Dumping structure for table psu_blue_cafe.users
CREATE TABLE IF NOT EXISTS `users` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `student_ID` int(11) NOT NULL,
  `name` varchar(100) NOT NULL,
  `role` enum('admin','employee') NOT NULL DEFAULT 'employee',
  `status` enum('ชั่วโมงทุน','ชั่วโมงปกติ') NOT NULL DEFAULT 'ชั่วโมงปกติ',
  `default_hour_type` enum('normal','fund') NOT NULL DEFAULT 'normal',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Dumping data for table psu_blue_cafe.users: ~8 rows (approximately)
INSERT INTO `users` (`user_id`, `username`, `password`, `student_ID`, `name`, `role`, `status`, `default_hour_type`) VALUES
	(1, 'admin1', '$2y$11$EDNN/7MVOWI.nW9XTBKYSuBEVx2emCp3Wh5DlAHuIJclvWBocd6q6', 65010001, 'แอดมินใหญ่', 'admin', 'ชั่วโมงปกติ', 'normal'),
	(2, 'front1', '81dc9bdb52d04dc20036dbd8313ed055', 65010002, 'พนักงานหน้าร้าน', 'employee', 'ชั่วโมงปกติ', 'normal'),
	(3, 'a1', '$2y$11$v0ZsaPtzB.YsMoMlAodhHO5u7LTzS.9nm35QMtb3NPuHZqVII/uz6', 650100021, 'พนักงานหน้าร้าน', 'employee', 'ชั่วโมงปกติ', 'normal'),
	(4, 'awdwad', '$2y$10$Qf8RcDT83CjbbKAUuHz8Uu9X.z0GAuIuqUIuXDCPUgVDYuUCus4sG', 2147483647, 'PUBG', 'employee', 'ชั่วโมงปกติ', 'normal'),
	(5, 'admin', '$2y$10$rCtZwYbc9g3vcp41fFXl0O7SYRQSyVANmqEq.n/bOgF6gYne3Y5ku', 23232, 'dawd', 'employee', 'ชั่วโมงปกติ', 'normal'),
	(6, 'user1', '$2y$11$dqZhYadxcc59gjiljjWRdupB/cyibA7sCH0.eAXUIAAmqLTBC9oKG', 2147483647, '1dad', 'employee', 'ชั่วโมงปกติ', 'normal'),
	(7, 'ีีuser2', '$2y$10$e/CxujGSi.NTZvCT8lnGGu1p56ZwfaG7t2WtYX7JL6mPntMPxRFfu', 1233, 'a3', 'employee', 'ชั่วโมงทุน', 'normal'),
	(8, 'x', '$2y$11$ryNN0B5PzvtCt5rhNI5B0eHN8V8kwtKrQNiwmWmCLMPWQQNYbVN2C', 2147483647, 'Soravit', 'employee', 'ชั่วโมงปกติ', 'normal');

-- Dumping structure for view psu_blue_cafe.v_menu_active_recipe
-- Creating temporary table to overcome VIEW dependency errors
CREATE TABLE `v_menu_active_recipe` 
) ENGINE=MyISAM;

-- Dumping structure for trigger psu_blue_cafe.trg_orders_before_insert
SET @OLDTMP_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_ZERO_IN_DATE,NO_ZERO_DATE,NO_ENGINE_SUBSTITUTION';
DELIMITER //
CREATE TRIGGER trg_orders_before_insert
BEFORE INSERT ON `orders`
FOR EACH ROW
BEGIN
  DECLARE v_date DATE;
  DECLARE v_seq  INT;

  SET v_date = DATE(IFNULL(NEW.order_time, NOW()));
  SET NEW.order_date = v_date;

  IF NEW.updated_at IS NULL OR NEW.updated_at = '0000-00-00 00:00:00' THEN
    SET NEW.updated_at = NOW(6);
  END IF;

  INSERT INTO order_counters (order_date, last_seq)
  VALUES (v_date, LAST_INSERT_ID(1))
  ON DUPLICATE KEY UPDATE last_seq = LAST_INSERT_ID(last_seq + 1);

  SET v_seq = LAST_INSERT_ID();
  SET NEW.order_seq = v_seq;
END//
DELIMITER ;
SET SQL_MODE=@OLDTMP_SQL_MODE;

-- Removing temporary table and create final VIEW structure
DROP TABLE IF EXISTS `v_menu_active_recipe`;
CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW `v_menu_active_recipe` AS SELECT m.menu_id, m.name AS menu_name, r.recipe_id, r.title AS recipe_title
FROM menu m
LEFT JOIN recipe_headers r ON r.recipe_id = m.current_recipe_id ;

/*!40103 SET TIME_ZONE=IFNULL(@OLD_TIME_ZONE, 'system') */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;
